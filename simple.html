<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pixel Regression Quest</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@200..900&display=swap" rel="stylesheet">
    <style>
    /* Pixel Game Theme CSS - Enhanced Colorful Version */
:root {
    --primary: #00f5d4;
    --secondary: #9b5de5;
    --dark: #2c3e50;
    --light: #ecf0f1;
    --accent1: #ff5e78;
    --accent2: #00bbf9;
    --border-color: #2c3e50;
    --bg-color: #1a1c2c;
    --table-header: #9b5de5;
    --table-row-odd: rgba(0, 245, 212, 0.1);
    --table-row-even: rgba(0, 245, 212, 0.2);
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: 'Press Start 2P', cursive;
    background-color: var(--bg-color);
    color: var(--light);
    line-height: 1.6;
    padding: 20px;
    background: linear-gradient(45deg, #f72585, #b5179e, #7209b7, #560bad, #480ca8, #3a0ca3, #3f37c9, #4361ee, #4895ef, #4cc9f0);
    background-size: 400% 400%;
    animation: gradient 15s ease infinite;
    min-height: 100vh;
    position: relative;
}

@keyframes gradient {
    0% {
        background-position: 0% 50%;
    }
    50% {
        background-position: 100% 50%;
    }
    100% {
        background-position: 0% 50%;
    }
}

/* Floating pixel elements */
body::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: 
        radial-gradient(circle at 10% 20%, rgba(255, 255, 255, 0.2) 1px, transparent 1px),
        radial-gradient(circle at 30% 40%, rgba(255, 255, 255, 0.2) 1px, transparent 1px),
        radial-gradient(circle at 50% 60%, rgba(255, 255, 255, 0.2) 1px, transparent 1px),
        radial-gradient(circle at 70% 80%, rgba(255, 255, 255, 0.2) 1px, transparent 1px),
        radial-gradient(circle at 90% 10%, rgba(255, 255, 255, 0.2) 1px, transparent 1px);
    background-size: 300px 300px;
    z-index: -1;
    animation: floatingPixels 20s linear infinite;
}

@keyframes floatingPixels {
    0% {
        background-position: 0px 0px;
    }
    100% {
        background-position: 300px 300px;
    }
}

.game-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
    border: 4px solid var(--primary);
    border-radius: 8px;
    box-shadow: 0 0 20px rgba(0, 245, 212, 0.5), 
                0 0 40px rgba(0, 245, 212, 0.3),
                0 0 60px rgba(0, 245, 212, 0.1);
    background-color: rgba(26, 28, 44, 0.85);
    position: relative;
    overflow: hidden;
}

/* Decorative corner pixels */
.game-container::before,
.game-container::after {
    content: "";
    position: absolute;
    width: 20px;
    height: 20px;
    background-color: var(--primary);
    z-index: 1;
}

.game-container::before {
    top: 0;
    left: 0;
    clip-path: polygon(0 0, 100% 0, 0 100%);
}

.game-container::after {
    bottom: 0;
    right: 0;
    clip-path: polygon(100% 100%, 0 100%, 100% 0);
}

.game-header {
    text-align: center;
    margin-bottom: 30px;
    padding-bottom: 20px;
    border-bottom: 4px solid var(--primary);
    position: relative;
}

.pixel-title {
    font-size: 2.5rem;
    background: linear-gradient(to right, #00f5d4, #00bbf9, #9b5de5, #ff5e78);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    text-shadow: 3px 3px 0 var(--dark);
    margin-bottom: 10px;
    letter-spacing: 2px;
    animation: titleGlow 2s ease-in-out infinite alternate;
}

@keyframes titleGlow {
    from {
        filter: drop-shadow(0 0 5px rgba(0, 245, 212, 0.7));
    }
    to {
        filter: drop-shadow(0 0 15px rgba(0, 245, 212, 0.9));
    }
}

.pixel-subtitle {
    font-size: 1rem;
    color: var(--light);
    margin-top: 10px;
    text-shadow: 2px 2px 0 rgba(0, 0, 0, 0.5);
}

.game-console {
    background-color: rgba(44, 62, 80, 0.7);
    border: 4px solid var(--secondary);
    border-radius: 8px;
    padding: 20px;
    margin-top: 20px;
    position: relative;
    backdrop-filter: blur(5px);
}

.model-inputs {
    display: flex;
    justify-content: space-around;
    flex-wrap: wrap;
    gap: 20px;
    margin-bottom: 30px;
}

.model-card {
    background-color: var(--dark);
    border: 3px solid var(--primary);
    border-radius: 8px;
    padding: 15px;
    min-width: 300px;
    box-shadow: 5px 5px 0 rgba(0, 0, 0, 0.3);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.model-card::before {
    content: "";
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(
        to right,
        rgba(255, 255, 255, 0) 0%,
        rgba(255, 255, 255, 0.1) 50%,
        rgba(255, 255, 255, 0) 100%
    );
    transform: rotate(45deg);
    animation: shine 3s infinite;
    pointer-events: none;
}

@keyframes shine {
    0% {
        top: -100%;
        left: -100%;
    }
    100% {
        top: 100%;
        left: 100%;
    }
}

.model-card:hover {
    transform: translateY(-5px);
    box-shadow: 8px 8px 0 rgba(0, 0, 0, 0.3);
}

.model-title {
    font-size: 1.2rem;
    color: var(--primary);
    margin-bottom: 15px;
    text-align: center;
    text-shadow: 2px 2px 0 rgba(0, 0, 0, 0.5);
}

.model-equation {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    font-size: 1rem;
}

.model-equation input {
    width: 60px;
    height: 30px;
    text-align: center;
    background-color: var(--light);
    border: 2px solid var(--primary);
    border-radius: 4px;
    color: var(--dark);
    font-family: 'Press Start 2P', cursive;
    font-size: 0.8rem;
    padding: 5px;
    transition: all 0.2s;
}

.model-equation input:focus {
    outline: none;
    box-shadow: 0 0 10px var(--primary);
    transform: scale(1.05);
}

.game-controls {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-bottom: 30px;
    flex-wrap: wrap;
}

.pixel-btn {
    background: linear-gradient(to right, var(--primary), var(--accent2));
    color: var(--dark);
    border: none;
    padding: 12px 20px;
    font-family: 'Press Start 2P', cursive;
    font-size: 0.8rem;
    cursor: pointer;
    border-radius: 4px;
    box-shadow: 3px 3px 0 rgba(0, 0, 0, 0.3);
    transition: all 0.2s;
    position: relative;
    overflow: hidden;
}

.pixel-btn::after {
    content: "";
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(
        to right,
        rgba(255, 255, 255, 0) 0%,
        rgba(255, 255, 255, 0.3) 50%,
        rgba(255, 255, 255, 0) 100%
    );
    transform: rotate(45deg);
    transition: all 0.3s;
    opacity: 0;
}

.pixel-btn:hover::after {
    opacity: 1;
    animation: btnShine 1s forwards;
}

@keyframes btnShine {
    0% {
        top: -100%;
        left: -100%;
    }
    100% {
        top: 100%;
        left: 100%;
    }
}

.pixel-btn:hover {
    transform: translateY(-2px);
    box-shadow: 5px 5px 0 rgba(0, 0, 0, 0.3);
    background: linear-gradient(to right, #00f5d4, #00bbf9);
}

.pixel-btn:active {
    transform: translateY(2px);
    box-shadow: 1px 1px 0 rgba(0, 0, 0, 0.3);
}

#addRowBtn {
    background: linear-gradient(to right, #00f5d4, #00bbf9);
}

#calculateBtn {
    background: linear-gradient(to right, #9b5de5, #f15bb5);
}

#resetBtn {
    background: linear-gradient(to right, #ff5e78, #ff9e00);
}

.data-display {
    margin-bottom: 30px;
    overflow-x: auto;
    border-radius: 8px;
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
}

.pixel-table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    border: 3px solid var(--border-color);
    border-radius: 8px;
    overflow: hidden;
}

.pixel-table th, 
.pixel-table td {
    padding: 12px;
    text-align: center;
    font-size: 0.7rem;
}

.pixel-table th {
    background: linear-gradient(to right, var(--secondary), #7209b7);
    color: var(--light);
    font-weight: normal;
    border-bottom: 2px solid var(--border-color);
}

.pixel-table tbody tr {
    transition: all 0.3s;
}

.pixel-table tbody tr:hover {
    background-color: rgba(0, 245, 212, 0.3);
    transform: scale(1.01);
}

.pixel-table tbody tr:nth-child(odd) {
    background-color: var(--table-row-odd);
}

.pixel-table tbody tr:nth-child(even) {
    background-color: var(--table-row-even);
}

.pixel-table tfoot {
    background: linear-gradient(to right, var(--secondary), #7209b7);
    color: var(--light);
    font-weight: bold;
}

.pixel-table input {
    width: 60px;
    height: 30px;
    text-align: center;
    background-color: var(--light);
    border: 2px solid var(--primary);
    border-radius: 4px;
    color: var(--dark);
    font-family: 'Press Start 2P', cursive;
    font-size: 0.7rem;
    padding: 5px;
    transition: all 0.2s;
}

.pixel-table input:focus {
    outline: none;
    box-shadow: 0 0 10px var(--primary);
    transform: scale(1.05);
}

.delete-btn {
    background-color: var(--accent1);
    color: var(--light);
    border: none;
    width: 25px;
    height: 25px;
    border-radius: 4px;
    cursor: pointer;
    font-family: 'Press Start 2P', cursive;
    font-size: 0.8rem;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto;
    transition: all 0.2s;
}

.delete-btn:hover {
    transform: scale(1.1);
    background-color: #ff0055;
    box-shadow: 0 0 10px rgba(255, 94, 120, 0.7);
}

.results-display {
    display: flex;
    justify-content: space-around;
    gap: 20px;
    margin-top: 30px;
    flex-wrap: wrap;
}

.result-card {
    background-color: var(--dark);
    border: 3px solid var(--primary);
    border-radius: 8px;
    padding: 15px;
    min-width: 200px;
    text-align: center;
    box-shadow: 5px 5px 0 rgba(0, 0, 0, 0.3);
    transition: all 0.3s;
    position: relative;
    overflow: hidden;
}

.result-card::before {
    content: "";
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(
        to right,
        rgba(255, 255, 255, 0) 0%,
        rgba(255, 255, 255, 0.1) 50%,
        rgba(255, 255, 255, 0) 100%
    );
    transform: rotate(45deg);
    animation: shine 3s infinite;
    animation-delay: 1s;
    pointer-events: none;
}

.result-card:hover {
    transform: translateY(-5px);
    box-shadow: 8px 8px 0 rgba(0, 0, 0, 0.3);
}

.result-card.model1 {
    border-color: var(--accent2);
    background: linear-gradient(135deg, var(--dark), rgba(0, 187, 249, 0.2));
}

.result-card.model2 {
    border-color: var(--accent1);
    background: linear-gradient(135deg, var(--dark), rgba(255, 94, 120, 0.2));
}

.result-card.winner {
    border-color: gold;
    background: linear-gradient(135deg, var(--dark), rgba(255, 215, 0, 0.2));
}

.result-title {
    font-size: 0.9rem;
    margin-bottom: 10px;
    color: var(--light);
    text-shadow: 2px 2px 0 rgba(0, 0, 0, 0.5);
}

.result-value {
    font-size: 1.2rem;
    color: var(--primary);
    text-shadow: 2px 2px 0 rgba(0, 0, 0, 0.5);
}

.model1 .result-value {
    color: var(--accent2);
}

.model2 .result-value {
    color: var(--accent1);
}

.winner .result-value {
    color: gold;
    font-size: 1.4rem;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .pixel-title {
        font-size: 1.8rem;
    }
    
    .model-inputs {
        flex-direction: column;
        align-items: center;
    }
    
    .model-card {
        width: 100%;
    }
    
    .game-controls {
        flex-direction: column;
        align-items: center;
    }
    
    .pixel-btn {
        width: 100%;
        margin-bottom: 10px;
    }
    
    .results-display {
        flex-direction: column;
        align-items: center;
    }
    
    .result-card {
        width: 100%;
    }
}

/* Animation effects */
@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

.winner {
    animation: pulse 2s infinite;
}

/* Confetti effect when winner is determined */
.confetti {
    position: absolute;
    width: 10px;
    height: 10px;
    background-color: #f0f;
    opacity: 0.7;
    animation: confetti 5s ease-in-out infinite;
}

@keyframes confetti {
    0% {
        transform: translateY(0) rotate(0deg);
        opacity: 0.7;
    }
    100% {
        transform: translateY(100vh) rotate(720deg);
        opacity: 0;
    }
}
.copyright {
            font-size: 16px;
            font-weight: 400;
            margin-top: 30px;
            margin-left: 44.5%;
            opacity: 0.7;
            position:relative;
            bottom: -2px;
            width: 100%;
            left: 0;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            font-family: Noto Serid Kr, sans-serif;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="game-header">
            <h1 class="pixel-title">Pixel Regression Quest</h1>
            <div class="pixel-subtitle">Compare your models and find the best fit!</div>
        </div>

        <div class="game-console">
            <div class="model-inputs">
                <div class="model-card">
                    <div class="model-title">Model 1</div>
                    <div class="model-equation">
                        <span>Ŷ = </span>
                        <input type="number" id="slope1" value="0" step="0.1">
                        <span>× x + </span>
                        <input type="number" id="intercept1" value="0" step="0.1">
                    </div>
                </div>
                
                <div class="model-card">
                    <div class="model-title">Model 2</div>
                    <div class="model-equation">
                        <span>Ŷ = </span>
                        <input type="number" id="slope2" value="0" step="0.1">
                        <span>× x + </span>
                        <input type="number" id="intercept2" value="0" step="0.1">
                    </div>
                </div>
            </div>

            <div class="game-controls">
                <button id="addRowBtn" class="pixel-btn">Add Data Point</button>
                <button id="calculateBtn" class="pixel-btn">Calculate</button>
                <button id="resetBtn" class="pixel-btn">Reset</button>
            </div>

            <div class="data-display">
                <table class="pixel-table">
                    <thead>
                        <tr>
                            <th>x</th>
                            <th>y</th>
                            <th>Ŷ1</th>
                            <th>(y - Ŷ1)²</th>
                            <th>Ŷ2</th>
                            <th>(y - Ŷ2)²</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody id="dataTable">
                        <tr>
                            <td><input type="number" class="x" step="0.1"></td>
                            <td><input type="number" class="y" step="0.1"></td>
                            <td class="y1">-</td>
                            <td class="sq_res1">-</td>
                            <td class="y2">-</td>
                            <td class="sq_res2">-</td>
                            <td><button class="delete-btn">×</button></td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr>
                            <th>Σ</th>
                            <th id="sum_y">0.00</th>
                            <th id="sum_y1">0.00</th>
                            <th id="sum_sq_res1">0.00</th>
                            <th id="sum_y2">0.00</th>
                            <th id="sum_sq_res2">0.00</th>
                            <th></th>
                        </tr>
                    </tfoot>
                </table>
            </div>

            <div class="results-display">
                <div class="result-card model1">
                    <div class="result-title">Model 1 SSE</div>
                    <div id="model1-sse" class="result-value">0.00</div>
                </div>
                <div class="result-card model2">
                    <div class="result-title">Model 2 SSE</div>
                    <div id="model2-sse" class="result-value">0.00</div>
                </div>
                <div class="result-card winner" id="winner-card">
                    <div class="result-title">Winner</div>
                    <div id="winner-model" class="result-value">-</div>
                </div>
            </div>
        </div>
        <div class="copyright" style="font-weight: 1000;">© 무젝 (mujek)</div>
    </div>

    <script >
        // Pixel Regression Quest - Game Logic

document.addEventListener('DOMContentLoaded', function() {
    // Get DOM elements
    const addRowBtn = document.getElementById('addRowBtn');
    const calculateBtn = document.getElementById('calculateBtn');
    const resetBtn = document.getElementById('resetBtn');
    const dataTable = document.getElementById('dataTable');
    
    // Model inputs
    const slope1Input = document.getElementById('slope1');
    const intercept1Input = document.getElementById('intercept1');
    const slope2Input = document.getElementById('slope2');
    const intercept2Input = document.getElementById('intercept2');
    
    // Results elements
    const model1SSE = document.getElementById('model1-sse');
    const model2SSE = document.getElementById('model2-sse');
    const winnerModel = document.getElementById('winner-model');
    const winnerCard = document.getElementById('winner-card');
    const gameConsole = document.querySelector('.game-console');

    // Add event listeners
    addRowBtn.addEventListener('click', addRow);
    calculateBtn.addEventListener('click', calculate);
    resetBtn.addEventListener('click', resetGame);
    
    // Add event listeners to model inputs for auto-calculation
    [slope1Input, intercept1Input, slope2Input, intercept2Input].forEach(input => {
        input.addEventListener('change', calculate);
    });
    
    // Add event listener for initial row inputs
    setupRowListeners(dataTable.querySelector('tr'));
    
    // Add delete button functionality to initial row
    setupDeleteButton(dataTable.querySelector('.delete-btn'));
    
    // Function to add a new data row
    function addRow() {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td><input type="number" class="x" step="0.1"></td>
            <td><input type="number" class="y" step="0.1"></td>
            <td class="y1">-</td>
            <td class="sq_res1">-</td>
            <td class="y2">-</td>
            <td class="sq_res2">-</td>
            <td><button class="delete-btn">×</button></td>
        `;
        
        // Add with animation
        row.style.opacity = '0';
        row.style.transform = 'translateY(-20px)';
        dataTable.appendChild(row);
        
        // Trigger reflow
        row.offsetHeight;
        
        // Apply animation
        row.style.transition = 'all 0.3s ease-out';
        row.style.opacity = '1';
        row.style.transform = 'translateY(0)';
        
        // Add event listeners to the new row
        setupRowListeners(row);
        
        // Setup delete button
        setupDeleteButton(row.querySelector('.delete-btn'));
        
        // Add pixel sound effect
        playPixelSound('add');
        
        // Add sparkle effect
        createSparkles(row);
    }
    
    // Setup input listeners for a row
    function setupRowListeners(row) {
        const xInput = row.querySelector('.x');
        const yInput = row.querySelector('.y');
        
        xInput.addEventListener('input', calculate);
        yInput.addEventListener('input', calculate);
        
        // Add focus effects
        [xInput, yInput].forEach(input => {
            input.addEventListener('focus', function() {
                this.style.boxShadow = '0 0 10px var(--primary)';
            });
            
            input.addEventListener('blur', function() {
                this.style.boxShadow = 'none';
            });
        });
    }
    
    // Setup delete button functionality
    function setupDeleteButton(button) {
        button.addEventListener('click', function() {
            const row = this.closest('tr');
            
            // Add removal animation
            row.style.transition = 'all 0.3s';
            row.style.opacity = '0';
            row.style.transform = 'scale(0.8) translateX(50px)';
            
            // Remove after animation completes
            setTimeout(() => {
                row.remove();
                calculate();
                
                // If no rows left, add one
                if (dataTable.children.length === 0) {
                    addRow();
                }
            }, 300);
            
            // Add pixel sound effect
            playPixelSound('delete');
        });
    }
    
    // Calculate function
    function calculate() {
        let slope1 = parseFloat(slope1Input.value) || 0;
        let intercept1 = parseFloat(intercept1Input.value) || 0;
        let slope2 = parseFloat(slope2Input.value) || 0;
        let intercept2 = parseFloat(intercept2Input.value) || 0;
        
        let sum_y = 0, sum_y1 = 0, sum_sq_res1 = 0, sum_y2 = 0, sum_sq_res2 = 0;
        
        // Process each row
        document.querySelectorAll('#dataTable tr').forEach(row => {
            const xInput = row.querySelector('.x');
            const yInput = row.querySelector('.y');
            
            if (xInput && yInput && xInput.value !== '' && yInput.value !== '') {
                const x = parseFloat(xInput.value);
                const y = parseFloat(yInput.value);
                
                // Calculate predictions
                const y1 = slope1 * x + intercept1;
                const y2 = slope2 * x + intercept2;
                
                // Calculate squared residuals
                const res1_sq = Math.pow(y - y1, 2);
                const res2_sq = Math.pow(y - y2, 2);
                
                // Update row cells with animation
                updateCellWithAnimation(row.querySelector('.y1'), y1.toFixed(2));
                updateCellWithAnimation(row.querySelector('.sq_res1'), res1_sq.toFixed(2));
                updateCellWithAnimation(row.querySelector('.y2'), y2.toFixed(2));
                updateCellWithAnimation(row.querySelector('.sq_res2'), res2_sq.toFixed(2));
                
                // Update sums
                sum_y += y;
                sum_y1 += y1;
                sum_sq_res1 += res1_sq;
                sum_y2 += y2;
                sum_sq_res2 += res2_sq;
            } else {
                // Clear cells if inputs are empty
                const y1Cell = row.querySelector('.y1');
                const sq_res1Cell = row.querySelector('.sq_res1');
                const y2Cell = row.querySelector('.y2');
                const sq_res2Cell = row.querySelector('.sq_res2');
                
                if (y1Cell) y1Cell.textContent = '-';
                if (sq_res1Cell) sq_res1Cell.textContent = '-';
                if (y2Cell) y2Cell.textContent = '-';
                if (sq_res2Cell) sq_res2Cell.textContent = '-';
            }
        });
        
        // Update footer sums with animation
        updateCellWithAnimation(document.getElementById('sum_y'), sum_y.toFixed(2));
        updateCellWithAnimation(document.getElementById('sum_y1'), sum_y1.toFixed(2));
        updateCellWithAnimation(document.getElementById('sum_sq_res1'), sum_sq_res1.toFixed(2));
        updateCellWithAnimation(document.getElementById('sum_y2'), sum_y2.toFixed(2));
        updateCellWithAnimation(document.getElementById('sum_sq_res2'), sum_sq_res2.toFixed(2));
        
        // Update result cards with animation
        updateCellWithAnimation(model1SSE, sum_sq_res1.toFixed(2));
        updateCellWithAnimation(model2SSE, sum_sq_res2.toFixed(2));
        
        // Store previous winner
        const prevWinner = winnerModel.textContent;
        
        // Determine winner
        let newWinner;
        if (sum_sq_res1 < sum_sq_res2) {
            newWinner = 'Model 1';
            winnerModel.style.color = 'var(--accent2)';
        } else if (sum_sq_res2 < sum_sq_res1) {
            newWinner = 'Model 2';
            winnerModel.style.color = 'var(--accent1)';
        } else {
            newWinner = 'Tie!';
            winnerModel.style.color = 'gold';
        }
        
        // Update winner with animation
        updateCellWithAnimation(winnerModel, newWinner);
        
        // If winner changed and it's not the initial calculation, create confetti
        if (prevWinner !== '-' && prevWinner !== newWinner) {
            createConfetti();
        }
        
        // Add pixel sound effect
        playPixelSound('calculate');
    }
    
    // Update cell with animation
    function updateCellWithAnimation(cell, newValue) {
        if (cell.textContent !== newValue) {
            cell.style.transition = 'all 0.3s';
            cell.style.transform = 'scale(1.2)';
            cell.style.color = '#fff';
            
            setTimeout(() => {
                cell.textContent = newValue;
                cell.style.transform = 'scale(1)';
                cell.style.color = '';
            }, 150);
        } else {
            cell.textContent = newValue;
        }
    }
    
    // Reset game function
    function resetGame() {
        // Reset model inputs with animation
        animateReset(slope1Input, 0);
        animateReset(intercept1Input, 0);
        animateReset(slope2Input, 0);
        animateReset(intercept2Input, 0);
        
        // Clear table except for first row
        while (dataTable.children.length > 1) {
            dataTable.removeChild(dataTable.lastChild);
        }
        
        // Reset first row
        const firstRow = dataTable.querySelector('tr');
        firstRow.querySelector('.x').value = '';
        firstRow.querySelector('.y').value = '';
        firstRow.querySelector('.y1').textContent = '-';
        firstRow.querySelector('.sq_res1').textContent = '-';
        firstRow.querySelector('.y2').textContent = '-';
        firstRow.querySelector('.sq_res2').textContent = '-';
        
        // Reset sums
        document.getElementById('sum_y').textContent = '0.00';
        document.getElementById('sum_y1').textContent = '0.00';
        document.getElementById('sum_sq_res1').textContent = '0.00';
        document.getElementById('sum_y2').textContent = '0.00';
        document.getElementById('sum_sq_res2').textContent = '0.00';
        
        // Reset result cards
        model1SSE.textContent = '0.00';
        model2SSE.textContent = '0.00';
        winnerModel.textContent = '-';
        
        // Add pixel sound effect
        playPixelSound('reset');
        
        // Add reset effect
        createResetEffect();
    }
    
    // Animate reset for inputs
    function animateReset(input, value) {
        input.style.transition = 'all 0.3s';
        input.style.transform = 'scale(0.8)';
        input.style.opacity = '0.5';
        
        setTimeout(() => {
            input.value = value;
            input.style.transform = 'scale(1)';
            input.style.opacity = '1';
        }, 200);
    }
    
    // Create reset effect
    function createResetEffect() {
        const effect = document.createElement('div');
        effect.style.position = 'absolute';
        effect.style.top = '0';
        effect.style.left = '0';
        effect.style.width = '100%';
        effect.style.height = '100%';
        effect.style.backgroundColor = 'rgba(255, 255, 255, 0.1)';
        effect.style.borderRadius = '8px';
        effect.style.zIndex = '10';
        effect.style.pointerEvents = 'none';
        
        gameConsole.appendChild(effect);
        
        // Animate and remove
        effect.animate(
            [
                { opacity: 0.2 },
                { opacity: 0 }
            ],
            {
                duration: 500,
                easing: 'ease-out'
            }
        ).onfinish = () => effect.remove();
    }
    
    // Create sparkles
    function createSparkles(element) {
        const rect = element.getBoundingClientRect();
        
        for (let i = 0; i < 5; i++) {
            const sparkle = document.createElement('div');
            sparkle.style.position = 'absolute';
            sparkle.style.width = '5px';
            sparkle.style.height = '5px';
            sparkle.style.backgroundColor = getRandomColor();
            sparkle.style.borderRadius = '50%';
            sparkle.style.zIndex = '100';
            sparkle.style.pointerEvents = 'none';
            
            // Random position around the element
            sparkle.style.left = `${rect.left + Math.random() * rect.width}px`;
            sparkle.style.top = `${rect.top + Math.random() * rect.height}px`;
            
            document.body.appendChild(sparkle);
            
            // Animate and remove
            sparkle.animate(
                [
                    { 
                        transform: 'scale(1) translate(0, 0)',
                        opacity: 1
                    },
                    { 
                        transform: `scale(0) translate(${Math.random() * 50 - 25}px, ${Math.random() * 50 - 25}px)`,
                        opacity: 0
                    }
                ],
                {
                    duration: 500 + Math.random() * 500,
                    easing: 'ease-out'
                }
            ).onfinish = () => sparkle.remove();
        }
    }
    
    // Create confetti effect
    function createConfetti() {
        for (let i = 0; i < 50; i++) {
            setTimeout(() => {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.backgroundColor = getRandomColor();
                confetti.style.left = `${Math.random() * 100}%`;
                confetti.style.top = '-10px';
                confetti.style.animationDelay = `${Math.random() * 3}s`;
                confetti.style.animationDuration = `${3 + Math.random() * 4}s`;
                
                gameConsole.appendChild(confetti);
                
                // Remove after animation
                setTimeout(() => {
                    confetti.remove();
                }, 7000);
            }, i * 50);
        }
    }
    
    // Get random color
    function getRandomColor() {
        const colors = ['#00f5d4', '#00bbf9', '#9b5de5', '#f72585', '#ff9e00', '#fee440'];
        return colors[Math.floor(Math.random() * colors.length)];
    }
    
    // Pixel sound effects (using Web Audio API)
    function playPixelSound(type) {
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();
        
        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);
        
        // Different sound types
        switch(type) {
            case 'add':
                oscillator.type = 'square';
                oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime); // C5
                oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime + 0.1); // E5
                gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
                oscillator.start();
                oscillator.stop(audioContext.currentTime + 0.2);
                break;
                
            case 'delete':
                oscillator.type = 'square';
                oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime); // E5
                oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime + 0.1); // C5
                gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
                oscillator.start();
                oscillator.stop(audioContext.currentTime + 0.2);
                break;
                
            case 'calculate':
                oscillator.type = 'triangle';
                oscillator.frequency.setValueAtTime(440, audioContext.currentTime); // A4
                oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime + 0.1); // C5
                gainNode.gain.setValueAtTime(0.05, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
                oscillator.start();
                oscillator.stop(audioContext.currentTime + 0.2);
                break;
                
            case 'reset':
                oscillator.type = 'sawtooth';
                oscillator.frequency.setValueAtTime(880, audioContext.currentTime); // A5
                oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime + 0.1); // E5
                oscillator.frequency.setValueAtTime(440, audioContext.currentTime + 0.2); // A4
                gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                oscillator.start();
                oscillator.stop(audioContext.currentTime + 0.3);
                break;
        }
    }
    
    // Initial calculation
    calculate();
    
    // Add initial sparkle effect
    setTimeout(() => {
        createSparkles(document.querySelector('.pixel-title'));
    }, 500);
});
    </script>
</body>
</html>